<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Generate Physical Project Markdown File | SharpMermaid </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Generate Physical Project Markdown File | SharpMermaid ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/dadaPipes/SharpMermaid/blob/main/SharpMermaid.Docs/docs/Features/GeneratePhysicalProjectMarkdownFile/AcceptanceTests.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="SharpMermaid">
            SharpMermaid
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="generate-physical-project-markdown-file">Generate Physical Project Markdown File</h1>

<h2 id="description">Description</h2>
<p><strong>As a</strong> developer,<br>
<strong>I want</strong> to automatically create a <code>.md</code> file at a specified output location,<br>
containing a code block, with a mermaid diagram that accurately represents the physical structure of my solution on disk,<br>
<strong>So that</strong> I can include it in my documentation with minimal effort</p>
<h2 id="cli-usage">CLI Usage</h2>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution {string} --output {string} [--fileName {string}] [--topLevelPublicTypes {bool}] [--classDiagramLinks {bool}] [--baseUrl {string}]
</code></pre>
<p><strong>Required</strong>:</p>
<p><code>--solution {string}</code>: Path to the solution file (relative to the current directory)</p>
<p><code>--output {string}</code>: Path to the generated <code>.md</code> file (relative to the current directory)</p>
<p><strong>Optional</strong>:</p>
<p><code>--fileName {string}</code>: Name of the generated .md file (without the .md extension)<br>
Default: &quot;mermaid&quot;</p>
<p><code>--topLevelPublicTypes {bool}</code>: Whether to include top-level public types in each project
Default: <code>false</code></p>
<p><code>--classDiagramLinks {bool}</code>: Whether to include clickable URLs to a class diagram for each project<br>
The URL pattern for class diagram links is: <code>{baseUrl}/{FilePath}/{ProjectName}</code><br>
It cannot be customized beyond this pattern
Default: <code>false</code></p>
<p><code>--baseUrl {string}</code>: Base URL to prepend to diagram links when <code>--classDiagramLinks</code> is enabled</p>
<h2 id="rules">Rules</h2>
<h3 id="creating-md-file">Creating .md File</h3>
<ul>
<li><p>If no <code>.md</code> file exists at the specified location, the system <strong>must</strong> create a new <code>.md</code> file and the console <strong>must</strong> display:<br>
&quot;Created new file '{fileName}.md' at '{path}'&quot;<br>
<a href="#creating-a-new-md-file"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>If a <code>.md</code> file with the same name already exists at that location, the system <strong>must</strong> overwrite it and the console <strong>must</strong> display:<br>
&quot;Overwriting existing file at '{path}/{fileName}.md'&quot;<br>
<a href="#overwriting-an-existing-md-file"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>The created <code>.md</code> file:</p>
<ul>
<li><strong>Must</strong> start with mermaid code block fence</li>
<li><strong>Must</strong> end with code block fence footer</li>
<li><strong>Must</strong> have its first non-fence line start with graph</li>
<li><strong>Must</strong> include a title that matches the solution name</li>
<li><strong>Must</strong> include project nodes matching the project names</li>
<li><strong>May</strong> include clickable URLs to class diagrams</li>
<li><strong>May</strong> include top-level public types</li>
<li><strong>May</strong> include project references between projects</li>
</ul>
</li>
</ul>
<h3 id="configuration-resolution">Configuration Resolution</h3>
<ul>
<li><p>CLI-provided optional flags <strong>must</strong> override the <code>.sharpmermaidconfig.json</code> file<br>
<a href="#cli-optionals-override-sharpmermaidconfigjson"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>If optional flags are not specified on the CLI,<br>
values <strong>must</strong> be taken from the <code>.sharpmermaidconfig.json</code> file located in the <code>pathToSolution</code> directory<br>
<a href="#sharpmermaidconfigjson-used-for-optionals"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>If neither the CLI nor the <code>.sharpmermaidconfig.json</code> file specifies an optional value,<br>
the system <strong>must</strong> fall back to default values<br>
<a href="#defaults-used-for-missing-optionals"><em><strong>see: scenario</strong></em></a></p>
</li>
</ul>
<h3 id="warnings">Warnings</h3>
<ul>
<li><p>If no project are found in the solution, the console must display:<br>
&quot;{solution path}:<br>
Warning: No projects found in the '{solution name}'&quot;<br>
<a href="#no-projects-found-in-solution"><em><strong>see: scenario:</strong></em></a></p>
</li>
<li><p>If no source files are found in a project, the console must display:<br>
&quot;{solution path}:<br>
Warning: No .cs files found in '{project Name}'&quot;<br>
<a href="#no-source-files-found-in-project"><em><strong>see: scenario:</strong></em></a></p>
</li>
</ul>
<h3 id="error-handling">Error Handling</h3>
<ul>
<li><p>If a <code>{required argument}</code> is not provided, the system <strong>must</strong> stop execution and the console <strong>must</strong> display:<br>
&quot;Error: Missing required argument '{required argument}'&quot;<br>
<a href="#required-argument-missing"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>If the provided solution file does not exist, the system <strong>must</strong> stop execution and the console <strong>must</strong> display:<br>
&quot;Error: Solution file not found at '{path}'.<br>
Please provide a valid path&quot;<br>
<a href="#invalid-solution-path"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>If the specified output path is invalid or inaccessible, the system <strong>must</strong> stop execution and the console <strong>must</strong> display:<br>
&quot;Error: Unable to write to '{path}'.<br>
Ensure the directory exists and is writable&quot;<br>
<a href="#invalid-output-path"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>If the JSON config file is invalid, the system <strong>must</strong> stop execution and the console <strong>must</strong> display:<br>
&quot;Error: Invalid configuration file at '{path}'.<br>
Please check the JSON format&quot;<br>
<a href="#invalid-sharpmermaidconfigjson"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>If <code>--classDiagramLinks</code> is true but no <code>--baseUrl</code> is provided, the system <strong>must</strong> stop execution and the console <strong>must</strong> display:<br>
&quot;Error: Missing required argument 'baseUrl' when 'classDiagramLinks' is enabled.<br>
Please provide '--baseUrl {string}' or configure it in '.sharpmermaidconfig.json'&quot;<br>
<a href="#missing---baseurl-with---classdiagramlinks-enabled"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>If the specified output path {path} contains illegal characters, the system <strong>must</strong> stop execution and the console <strong>must</strong> display:<br>
&quot;Error: The output path '{path}' contains illegal characters.<br>
Please provide a valid file path.&quot;<br>
<a href="#illegal-characters-in-output-path"><em><strong>see: scenario</strong></em></a></p>
</li>
<li><p>If the system cannot interpret the specified output path {path} as a valid file path, the system <strong>must</strong> stop execution and the console <strong>must</strong> display:<br>
&quot;Error: Invalid filepath '{path}'.<br>
Please provide a valid file path.&quot;<br>
<a href="#invalid-output-path"><em><strong>see: scenario</strong></em></a></p>
</li>
</ul>
<h2 id="scenarios">Scenarios</h2>
<hr>
<h3 id="no-projects-found-in-solution">No projects found in solution</h3>
<p>Given, When, Then</p>
<hr>
<h3 id="no-source-files-found-in-project">No source files found in project</h3>
<p>Given, When, Then</p>
<hr>
<h3 id="creating-a-new-md-file">Creating a New .md File</h3>
<p><strong>Given</strong> the developer’s current working directory is <code>{cwd}</code><br>
<strong>And</strong> a solution file named <code>TestSolution.sln</code> is located at <code>{cwd}/TestSolution.sln</code><br>
<strong>And</strong> the developer specifies the output directory <code>./Diagrams</code><br>
<strong>When</strong> the developer runs:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --output ./Diagrams
</code></pre>
<p><strong>Then</strong> the system must create a new <code>.md</code> file named <code>mermaid.md</code> at <code>{cwd}/Diagrams</code><br>
<strong>And</strong> the console must display:
&quot;Created new file '{fileName}' at '{solutionPath}/Diagrams'&quot;</p>
<hr>
<h3 id="overwriting-an-existing-md-file">Overwriting an Existing .md File</h3>
<p>Given the specified output path {path} exists and is writable
And a file named {fileName}.md already exists at {path}
When the system executes the command
Then the system must overwrite the existing {fileName}.md file with the new content
And the system must not create a backup of the old file
And the system must display:
&quot;Overwriting existing file at '{path}/{fileName}.md'&quot;</p>
<hr>
<h3 id="cli-optionals-override-sharpmermaidconfigjson">CLI Optionals Override .sharpmermaidconfig.json</h3>
<p><strong>Given</strong> a solution TestSolution containing:</p>
<ul>
<li><p>ProjectA at <code>ProjectA/ProjectA.csproj</code></p>
</li>
<li><p>A file <code>Example.cs</code> in ProjectA with <code>public class Example {}</code></p>
</li>
</ul>
<p><strong>And</strong> a <code>.sharpmermaidconfig.json</code> file exist in the solution with:</p>
<pre><code class="lang-json">{
  &quot;includeUrls&quot;: false,
  &quot;topLevelPublicTypes&quot;: false
}
</code></pre>
<p><strong>When</strong> the developer runs:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --output ./diagram.md --includePublicTypes true
</code></pre>
<p><strong>Then</strong> the generated <code>.md</code> file's code block includes public types:</p>
<pre><code>```mermaid
---
title: TestSolution
---
graph
    ProjectA[&quot;**ProjectA**
        public class Foo&quot;]
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA[&quot;**ProjectA**
        public class Foo&quot;]
</code></pre>
<hr>
<h3 id="sharpmermaidconfigjson-used-for-optionals">.sharpmermaidconfig.json Used for Optionals</h3>
<p><strong>Given</strong> a solution TestSolution containing:</p>
<ul>
<li><p>ProjectA at <code>ProjectA/ProjectA.csproj</code></p>
</li>
<li><p>A file <code>Example.cs</code> in ProjectA with <code>public class Example {}</code></p>
</li>
</ul>
<p><strong>And</strong> a <code>.sharpmermaidconfig.json</code> file exist in the solution with:</p>
<pre><code class="lang-json">{
  &quot;includeUrls&quot;: false,
  &quot;topLevelPublicTypes&quot;: true
}
</code></pre>
<p><strong>When</strong> the developer runs:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --output ./diagram.md
</code></pre>
<p><strong>Then</strong> the generated <code>.md</code> file's code block includes public types:</p>
<pre><code>```mermaid
---
title: TestSolution
---
graph
    ProjectA[&quot;**ProjectA**
        public class Example&quot;]
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA[&quot;**ProjectA**
        public class Example&quot;]
</code></pre>
<hr>
<h3 id="defaults-used-for-missing-optionals">Defaults Used for Missing Optionals</h3>
<p><strong>Given</strong> a solution TestSolution containing:</p>
<ul>
<li><p>ProjectA at <code>ProjectA/ProjectA.csproj</code></p>
</li>
<li><p>A file <code>Example.cs</code> in ProjectA with <code>public class Example {}</code></p>
</li>
</ul>
<p><strong>And</strong> no <code>.sharpmermaidconfig.json</code> file exist in the solution</p>
<p><strong>When</strong> the developer runs:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --output ./diagram.md
</code></pre>
<p><strong>Then</strong> the generated <code>.md</code> file's code block does not include public types:</p>
<pre><code>```mermaid
---
title: TestSolution
---
graph
    ProjectA
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
</code></pre>
<hr>
<h3 id="required-argument-missing">Required Argument Missing</h3>
<p><strong>Given</strong> a solution TestSolution</p>
<p><strong>When</strong> the developer runs the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram
</code></pre>
<p><strong>Then</strong> the system stops execution and displays an error message: <code>Error: Missing required argument '--solution'</code></p>
<hr>
<h3 id="invalid-solution-path">Invalid Solution Path</h3>
<p><strong>Given</strong> no solution</p>
<p><strong>When</strong> the developer runs the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./NonExistent.sln
</code></pre>
<p><strong>Then</strong> the system stops execution and displays an error message: <code>Error: Solution file not found at './NonExistent.sln'. Please provide a valid path</code></p>
<hr>
<h3 id="invalid-sharpmermaidconfigjson">Invalid .sharpmermaidconfig.json</h3>
<p><strong>Given</strong> a JSON config file exists at ./config.json<br>
<strong>And</strong> the file content is not valid JSON<br>
<strong>When</strong> the developer runs:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --output ./diagram.md
</code></pre>
<p><strong>Then</strong> the system stops execution<br>
<strong>And</strong> displays an error message: &quot;Error: Invalid configuration file at ./config.json. Please check the JSON format&quot;</p>
<hr>
<h3 id="optional-flags-provided-directly">Optional Flags Provided Directly</h3>
<p><strong>Given</strong> no JSON config exists</p>
<p><strong>When</strong> the developer runs:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --output ./diagram.md --includeUrls false --includePublicTypes true
</code></pre>
<p><strong>Then</strong> the system generates a <code>.md</code> file at <code>./diagram.md</code><br>
<strong>And</strong> the file’s content includes public types<br>
<strong>And</strong> does not include clickable URLs<br>
<strong>And</strong> the file’s content matches the expected output:</p>
<hr>
<h3 id="illegal-characters-in-output-path">Illegal Characters in Output Path</h3>
<p>Given the specified output path {path} contains illegal characters (e.g., &lt;&gt;|:&quot;?* on Windows)
When the system executes the command
Then the system must stop execution
And the system must display:
&quot;Error: The output path '{path}' contains illegal characters. Please provide a valid file path.&quot;</p>
<hr>
<h3 id="invalid-output-path">Invalid Output Path</h3>
<p>Given the specified output path {path} is not a valid file path (e.g., references a device name like COM1 or is structurally invalid)
When the system executes the command
Then the system must stop execution
And the system must display:
&quot;Error: The output path '{path}' is not a valid file path. Please provide a valid file path.&quot;</p>
<hr>
<p><strong>Postcondition</strong>:</p>
<ul>
<li>The file <code>MySolution.md</code> contains the up-to-date diagram.</li>
</ul>
<hr>
<h3 id="missing---baseurl-with---classdiagramlinks-enabled">Missing --baseUrl with --classDiagramLinks enabled</h3>
<p><strong>Given</strong> a developer runs sharpmermaid generate-diagram --solution MySolution.sln --output diagram.md --classDiagramLinks true</p>
<p>There is no --baseUrl specified via CLI</p>
<p>The .sharpmermaidconfig.json in the solution directory does not include baseUrl</p>
<p><strong>When</strong> The tool processes the command</p>
<p><strong>Then</strong> the system must stop execution</p>
<p>The system must display the following error message:
&quot;Error: Missing required argument 'baseUrl' when 'classDiagramLinks' is enabled. Please provide '--baseUrl {string}' or configure it in '.sharpmermaidconfig.json'&quot;</p>
<p>No diagram file is created or modified</p>
<hr>
<p>DU SKAL HUSKE AT INKLUDERE OVERWRITE EXISTING FILE {FILENAME OR PATH OR WHATEVER} ?</p>
<p>YES/NO:</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/dadaPipes/SharpMermaid/blob/main/SharpMermaid.Docs/docs/Features/GeneratePhysicalProjectMarkdownFile/AcceptanceTests.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
