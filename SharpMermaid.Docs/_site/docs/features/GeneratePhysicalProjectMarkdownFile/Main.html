<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Generate Physical Project Diagram | SharpMermaid </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Generate Physical Project Diagram | SharpMermaid ">
      
      
      <link rel="icon" href="../../../favicon.ico">
      <link rel="stylesheet" href="../../../public/docfx.min.css">
      <link rel="stylesheet" href="../../../public/main.css">
      <meta name="docfx:navrel" content="../../../toc.html">
      <meta name="docfx:tocrel" content="../../toc.html">
      
      <meta name="docfx:rel" content="../../../">
      
      
      <meta name="docfx:docurl" content="https://github.com/dadaPipes/SharpMermaid/blob/main/SharpMermaid.Docs/docs/Features/GeneratePhysicalProjectMarkdownFile/Main.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../../../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../../../index.html">
            <img id="logo" class="svg" src="../../../logo.svg" alt="SharpMermaid">
            SharpMermaid
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="generate-physical-project-diagram"><strong>Generate Physical Project Diagram</strong></h1>

<h2 id="description"><strong>Description</strong></h2>
<p>As a developer,<br>
I want to generate a diagram that reflects the solution structure on disk,<br>
and format it as a mermaid code block,<br>
So I can use it in a <code>.md</code> file</p>
<h2 id="rules"><strong>Rules</strong></h2>
<ul>
<li><strong>Must</strong> start with mermaid code block fence</li>
<li><strong>Must</strong> end with code block fence footer</li>
<li>First non-fence line <strong>must</strong> begin with <code>graph</code></li>
<li><strong>Must</strong> include a title same as the solution name</li>
<li><strong>Must</strong> include a project node for each project in the solution</li>
<li>Individual project nodes <strong>must</strong> have the same name as the project</li>
<li>Project nodes <strong>may</strong> include project references</li>
<li><strong>May</strong> include a clickable url to a projects class diagram</li>
<li><strong>May</strong> include projects top-level public types</li>
</ul>
<h2 id="scenarios"><strong>Scenarios</strong></h2>
<h2 id="project-references">Project References</h2>
<h3 id="no-reference">No Reference</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
<li><code>ProjectB</code> at <code>ProjectB/ProjectB.csproj</code></li>
<li><code>ProjectC</code> at <code>ProjectC/ProjectC.csproj</code></li>
</ul>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln`
</code></pre>
<p>from the solution directory</p>
<p><strong>Then</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    ProjectA
    ProjectB
    ProjectC
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
    ProjectB
    ProjectC
</code></pre>
<hr>
<h3 id="one-way-reference">One-Way Reference</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
<li><code>ProjectB</code> at <code>ProjectB/ProjectB.csproj</code></li>
<li><code>ProjectC</code> at <code>ProjectC/ProjectC.csproj</code></li>
<li><code>ProjectD</code> at <code>ProjectC/ProjectD.csproj</code></li>
<li><code>ProjectE</code> at <code>ProjectC/ProjectE.csproj</code></li>
<li><code>ProjectF</code> at <code>ProjectC/ProjectF.csproj</code></li>
</ul>
<p><strong>And</strong> <code>ProjectA</code> has a project reference to <code>ProjectB</code> and <code>ProjectC</code><br>
<strong>And</strong> <code>ProjectB</code> has a project reference to <code>ProjectD</code><br>
<strong>And</strong> <code>ProjectE</code> has a project reference to <code>ProjectF</code></p>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln
</code></pre>
<p>from the solution directory</p>
<p><strong>Then</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    ProjectA
    ProjectB
    ProjectC
    ProjectE
    ProjectF
    ProjectA --&gt; ProjectB
    ProjectA --&gt; ProjectC
    ProjectB --&gt; ProjectD
    ProjectE --&gt; ProjectF
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
    ProjectB
    ProjectC
    ProjectE
    ProjectF
    ProjectA --&gt; ProjectB
    ProjectA --&gt; ProjectC
    ProjectB --&gt; ProjectD
    ProjectE --&gt; ProjectF
</code></pre>
<hr>
<h3 id="bi-directional-reference">Bi-Directional Reference</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
<li><code>ProjectB</code> at <code>ProjectB/ProjectB.csproj</code></li>
<li><code>ProjectC</code> at <code>ProjectC/ProjectC.csproj</code></li>
</ul>
<p><strong>And</strong> <code>ProjectA</code> has a project reference to <code>ProjectB</code> and <code>ProjectC</code><br>
<strong>And</strong> <code>ProjectB</code> has a project reference to <code>ProjectA</code></p>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln
</code></pre>
<p>from the solution directory</p>
<p><strong>Then</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    ProjectA
    ProjectB
    ProjectC
    ProjectA --&gt; ProjectC
    ProjectA &lt;--&gt; ProjectB
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
    ProjectB
    ProjectC
    ProjectA --&gt; ProjectC
    ProjectA &lt;--&gt; ProjectB
</code></pre>
<hr>
<h2 id="urls-config">URLs Config</h2>
<h3 id="explicitly-enabled">Explicitly Enabled</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>Zebra</code>  at <code>Zebra/Zebra.csproj</code></li>
<li><code>Monkey</code> at <code>Cage/Monkey/Monkey.csproj</code></li>
<li><code>Penguin</code> at <code>NorthPole/IceBlock/Penguin/Penguin.csproj</code></li>
</ul>
<p><strong>And</strong> the base url is set to <code>https://example.com/</code></p>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --include-urls true
</code></pre>
<p>from the solution directory</p>
<p><strong>Then</strong> the code block <strong>must</strong> include a clickable URL to each the projects class diagram<br>
<strong>And</strong> the URL <strong>must</strong> correctly reflect the projectâ€™s file path (if it's not at the root directory)<br>
<strong>And</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    Zebra
    Monkey
    Penguin
    click Zebra &quot;https://example.com/Zebra.csproj&quot;
    click Monkey &quot;https://example.com/Cage/Monkey.csproj&quot;
    click Penguin &quot;https://example.com/NorthPole/IceBlock/Penguin.csproj&quot;
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    Zebra
    Monkey
    Penguin
    click Zebra &quot;https://example.com/Zebra.csproj&quot;
    click Monkey &quot;https://example.com/Cage/Monkey.csproj&quot;
    click Penguin &quot;https://example.com/NorthPole/IceBlock/Penguin.csproj&quot;
</code></pre>
<hr>
<h3 id="explicitly-disabled">Explicitly Disabled</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
</ul>
<p><strong>And</strong> a JSON config file exists with <code>IncludeUrls</code> set to <code>true</code></p>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --include-urls false
</code></pre>
<p><em><strong>Then</strong></em> the generated diagram output <strong>must not</strong> contain any URLs
<strong>And</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    ProjectA
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
</code></pre>
<hr>
<h3 id="no-config-default-behavior">No Config (default behavior)</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
</ul>
<p><strong>And</strong> no CLI parameters for URLs are provided
<strong>And</strong> no JSON config file exists
<strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln
</code></pre>
<p><strong>Then</strong> the generated diagram output <strong>must not</strong> contain any URLs
<strong>And</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    ProjectA
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
</code></pre>
<hr>
<h3 id="json-fallback">JSON Fallback</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code>  at <code>ProjectA/ProjectA.csproj</code></li>
</ul>
<p><strong>And</strong> no CLI parameter for URLs are provided<br>
<strong>And</strong> a JSON config file exists with <code>IncludeUrls</code> set to <code>true</code><br>
<strong>And</strong> the base url is set to <code>https://example.com/</code></p>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln
</code></pre>
<p>from the solution directory</p>
<p><strong>Then</strong> the code block <strong>must</strong> include a clickable URL for the projects class diagram<br>
<strong>And</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    ProjectA
    click Zebra &quot;https://example.com/ProjectA.csproj&quot;
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
    click Zebra &quot;https://example.com/ProjectA.csproj&quot;
</code></pre>
<hr>
<h3 id="json-not-found-fallback-to-default">JSON Not Found Fallback to Default</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
</ul>
<p><strong>And</strong> no CLI parameters for URLs are provided<br>
<strong>And</strong> no JSON config file exists</p>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln
</code></pre>
<p><strong>Then</strong> the generated diagram output <strong>must not</strong> contain any URLs<br>
<strong>And</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    ProjectA
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
</code></pre>
<hr>
<h3 id="cli-overrides-json-config">CLI Overrides JSON Config</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
</ul>
<p><strong>And</strong> a JSON config file exists with <code>IncludeUrls</code> set to <code>false</code><br>
<strong>And</strong> the base url is set to <code>https://example.com/</code></p>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --include-urls true
</code></pre>
<p><strong>Then</strong> the code block <strong>must</strong> include a clickable URL to the projects class diagram<br>
<strong>And</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    ProjectA
    click ProjectA &quot;https://example.com/ProjectA.csproj&quot;
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
    click ProjectA &quot;https://example.com/ProjectA.csproj&quot;
</code></pre>
<hr>
<h2 id="public-types-config">Public Types Config</h2>
<h3 id="explicitly-enabled-1">Explicitly Enabled</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><p><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></p>
</li>
<li><p>A file <code>Rabbit.cs</code> in <code>ProjectA</code> with:</p>
</li>
</ul>
<pre><code class="lang-csharp">public class Rabbit {}
</code></pre>
<ul>
<li>A file <code>Dog.cs</code> in <code>ProjectB</code> with:</li>
</ul>
<pre><code class="lang-csharp">public class Dog {}
internal class IFoo {}
private class Bar {}
class Baz {}
</code></pre>
<ul>
<li>A file <code>Cat.cs</code> in <code>ProjectC</code> with:</li>
</ul>
<pre><code class="lang-csharp">public class Cat {}
public interface IFoo {}
public record Bar {}
</code></pre>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --include-public-types true
</code></pre>
<p><strong>Then</strong> each node <strong>must</strong> list all public top-level types<br>
<strong>And</strong> the output is:</p>
<pre><code class="lang-text">```mermaid
---
title: TestSolution
---
graph
    ProjectA[&quot;**ProjectA**
        public class Rabbit&quot;]
    ProjectB[&quot;**ProjectB**
        public class Dog&quot;]
    ProjectC[&quot;**ProjectC**
        public class Cat
        public interface IFoo
        public record Bar&quot;]
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA[&quot;**ProjectA**
        public class Rabbit&quot;]
    ProjectB[&quot;**ProjectB**
        public class Dog&quot;]
    ProjectC[&quot;**ProjectC**
        public class Cat
        public interface IFoo
        public record Bar&quot;]
</code></pre>
<h3 id="explicitly-disabled-1">Explicitly Disabled</h3>
<p><strong>Given</strong> a solution TestSolution containing:</p>
<p><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></p>
<ul>
<li>A file <code>Rabbit.cs</code> in <code>ProjectA</code> with:</li>
</ul>
<pre><code class="lang-csharp">public class Rabbit {}
</code></pre>
<p><strong>And</strong> a JSON config file exists with <code>IncludePublicTypes: true</code></p>
<p>When I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln --include-public-types false
</code></pre>
<p><strong>Then</strong> the generated diagram output must not contain any public types<br>
<strong>And</strong> the output is:</p>
<pre><code>```mermaid
---
title: TestSolution
---
graph
    ProjectA
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
</code></pre>
<hr>
<h3 id="no-config-default-behavior-1">No Config (Default Behavior)</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
</ul>
<p>A file <code>PublicTypeExample.cs</code> in <code>ProjectA</code> with:</p>
<pre><code class="lang-csharp">public class Foo {}
And no CLI parameter or JSON config file is present
</code></pre>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln
</code></pre>
<p><strong>Then</strong> the generated diagram output must not contain any public types
<strong>And</strong> the output is:</p>
<pre><code>```mermaid
---
title: TestSolution
---
graph
    ProjectA
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
</code></pre>
<hr>
<h3 id="json-fallback-1">JSON Fallback</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
</ul>
<p>A file <code>PublicTypeExample.cs</code> in <code>ProjectA</code> with:</p>
<pre><code class="lang-csharp">public class Foo {}
</code></pre>
<p><strong>And</strong> a JSON config file exists with:</p>
<pre><code class="lang-json">{
  &quot;IncludePublicTypes&quot;: true
}
</code></pre>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln
</code></pre>
<p><strong>Then</strong> the generated diagram output must include the public type Foo<br>
<strong>And</strong> the output is:</p>
<pre><code>```mermaid
---
title: TestSolution
---
graph
    ProjectA[&quot;**ProjectA**
        public class Foo&quot;]
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA[&quot;**ProjectA**
        public class Foo&quot;]
</code></pre>
<hr>
<h3 id="json-not-found-fallback-to-default-1">JSON Not Found Fallback to Default</h3>
<p><strong>Given</strong> a solution <code>TestSolution</code> containing:</p>
<ul>
<li><code>ProjectA</code> at <code>ProjectA/ProjectA.csproj</code></li>
</ul>
<p><strong>And</strong> a file <code>PublicTypeExample.cs</code> in <code>ProjectA</code> with:</p>
<pre><code class="lang-csharp">public class Foo {}
</code></pre>
<p><strong>And</strong> no JSON config file exists</p>
<p><strong>When</strong> I run the command:</p>
<pre><code class="lang-shell">sharpmermaid generate-diagram --solution ./TestSolution.sln
</code></pre>
<p><strong>Then</strong> the generated diagram output <strong>must not</strong> include any public types<br>
<strong>And</strong> the output is:</p>
<pre><code>```mermaid
---
title: TestSolution
---
graph
    ProjectA
```
</code></pre>
<pre><code class="lang-mermaid">---
title: TestSolution
---
graph
    ProjectA
</code></pre>
<hr>
<h3 id="cli-overrides-json-config-1">CLI Overrides JSON Config</h3>
<hr>
<h2 id="technical-notes">Technical Notes</h2>
<p>The URL pattern for clickable links is currently global, set to {baseUrl}/{FilePath}/{ProjectName}, and cannot be customized</p>
<h2 id="file-output-handling">File Output Handling</h2>
<h3 id="save-to-md-file">Save to .md file</h3>
<p>Content of file matches in-memory diagram</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/dadaPipes/SharpMermaid/blob/main/SharpMermaid.Docs/docs/Features/GeneratePhysicalProjectMarkdownFile/Main.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
